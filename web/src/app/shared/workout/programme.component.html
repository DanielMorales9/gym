<div class="card-container">
    <mat-card>
        <mat-card-header>
            <mat-card-title>
                Programma - {{event?.name}}
            </mat-card-title>
            <mat-card-subtitle>
                <mat-icon fontSet="fa" fontIcon="fa-tag"></mat-icon>&nbsp;{{getType() || 'Loading...'}}
            </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
            <div class="summary-info">
                <span>
                    <mat-icon fontSet="fas" fontIcon="fa-calendar"></mat-icon>
                    {{event?.startTime | date: 'dd/MM/yyyy'}} {{event?.startTime | date: 'HH:mm'}} -
                    &nbsp;{{event?.endTime | date: 'HH:mm'}}
                </span>
                <ng-container [ngSwitch]="event?.type">
                    <ng-container *ngSwitchCase="'P'">
                        <span>
                            <mat-icon fontSet="fas" fontIcon="fa-user"></mat-icon>{{event?.reservation.user.firstName}}
                            {{event?.reservation.user.lastName}}
                        </span>
                    </ng-container>
                </ng-container>
                <h6 style="margin-top: 8px">Workout</h6>
                <mat-expansion-panel [class.mat-expansion-panel]="false" class='expansion-list'
                                     *ngFor="let workout of event?.session.workouts">
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            {{workout?.name || 'Loading...'}}
                        </mat-panel-title>
                        <mat-panel-description class="panel-header-description">
                            {{workout?.tag2}} {{workout?.tag3}}
                        </mat-panel-description>
                    </mat-expansion-panel-header>
                    <div class="mat-ex-panel-body">
                        <div style="margin-bottom: 8px;">
                            <span>{{workout?.tag1 || 'Loading...'}}</span>
                        </div>
                        <div class="panel-body-description">
                            <span style="white-space: pre;" [innerHTML]="workout?.description"></span>
                        </div>
                    </div>
                    <div class="panel-actions">
                        <button mat-button color="basic" *ngIf="canEditWorkout" (click)="editWorkout(workout)">
                            <span>
                                <mat-icon fontSet="fa" fontIcon="fa-edit"></mat-icon>&nbsp;Modifica
                            </span>
                        </button>
                        <button mat-button color="warn" *ngIf="canDeleteWorkout" (click)="deleteWorkout(workout)">
                            <span>
                                <mat-icon fontSet="fa" fontIcon="fa-trash"></mat-icon>&nbsp;Elimina
                            </span>
                        </button>
                    </div>
                </mat-expansion-panel>
            </div>
        </mat-card-content>
        <mat-card-actions>
            <button mat-button color="warn" (click)="deleteProgramme()" *ngIf="canDeleteWorkout">
                <span>
                    <mat-icon fontSet="fas" fontIcon="fa-trash"></mat-icon>&nbsp;Elimina Programma
                </span>
            </button>
        </mat-card-actions>
    </mat-card>
</div>
